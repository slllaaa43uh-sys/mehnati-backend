# ğŸ“Š ØªØµÙˆØ± Data Flow Ù„Ø¹Ù…Ù„ÙŠØ© Ø±ÙØ¹ Ø§Ù„ÙÙŠØ¯ÙŠÙˆ

## ğŸ¯ Ø§Ù„Ø³ÙŠÙ†Ø§Ø±ÙŠÙˆ: Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ÙŠØ±ÙØ¹ ÙÙŠØ¯ÙŠÙˆ Ø¨Ø¯ÙˆÙ† Ù†Øµ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           Ø§Ù„Ù…Ø±Ø­Ù„Ø© Ø§Ù„Ø£ÙˆÙ„Ù‰: Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ù…Ù„Ù (Step 1)                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

  Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ÙŠØ¶ØºØ· Ø¹Ù„Ù‰ "Ø¥Ø¶Ø§ÙØ© ÙˆØ³Ø§Ø¦Ø·"
           â†“
  <input type="file" onChange={handleMediaUpload} />
           â†“
  e.target.files = FileList {
    0: File {
      name: 'my-video.mp4',
      size: 5242880,  // 5MB
      type: 'video/mp4',
      lastModified: 1704067200000
    }
  }
           â†“
  handleMediaUpload() ÙŠÙØ³ØªØ¯Ø¹Ù‰
           â”‚
           â”œâ”€ newFileObjects = [File1]  âœ…
           â”‚
           â”œâ”€ newMediaURLs = [{
           â”‚    url: 'blob:http://localhost:3000/abc123',
           â”‚    type: 'video'
           â”‚  }]  âœ…
           â”‚
           â”œâ”€ setMediaFileObjects(prev => [...prev, File1])
           â”‚  Ø§Ù„Ø­Ø§Ù„Ø©: mediaFileObjects = [File1]  âœ…
           â”‚
           â””â”€ setMediaFiles(prev => [...prev, {
                url: 'blob:...',
                type: 'video'
              }])
              Ø§Ù„Ø­Ø§Ù„Ø©: mediaFiles = [{ url: 'blob:...', type: 'video' }]  âœ…

           â†“
  Ø§Ù„Ù…Ø¹Ø§ÙŠÙ†Ø© ØªØ¸Ù‡Ø± Ø§Ù„ÙÙŠØ¯ÙŠÙˆ Ù„Ù„Ù…Ø³ØªØ®Ø¯Ù…
  <video src="blob:http://localhost:3000/abc123" />  âœ… ÙŠØ¹Ù…Ù„

  Ø§Ù„Ø­Ø§Ù„Ø© Ø§Ù„Ø­Ø§Ù„ÙŠØ©:
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ mediaFileObjects: [File1]  â”‚ âœ…
  â”‚ mediaFiles: [{ ... }]      â”‚ âœ…
  â”‚ step: 1                    â”‚
  â”‚ text: ''                   â”‚
  â”‚ category: null             â”‚ âš ï¸
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚        Ø§Ù„Ù…Ø±Ø­Ù„Ø© Ø§Ù„Ø«Ø§Ù†ÙŠØ©: Ø§Ù†ØªÙ‚Ø§Ù„ Ù„Ù„Ø®Ø·ÙˆØ© Ø§Ù„Ø«Ø§Ù†ÙŠØ© (Step 2)         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

  Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ÙŠØ¶ØºØ· "Ø§Ù„ØªØ§Ù„ÙŠ"
           â†“
  handleNext() ÙŠÙØ³ØªØ¯Ø¹Ù‰
           â”‚
           â”œâ”€ ØªØ­Ù‚Ù‚: (!text && mediaFiles.length === 0)
           â”‚         false && false = false âœ… ÙŠÙ…Ø±Ø±
           â”‚
           â”œâ”€ ØªØ­Ù‚Ù‚: !category
           â”‚         true âš ï¸ ÙŠØ¬Ø¨ Ø§Ø®ØªÙŠØ§Ø± ØªØµÙ†ÙŠÙ!
           â”‚         (ÙŠØ¸Ù‡Ø± Ø±Ø³Ø§Ù„Ø© Ø§Ù„Ø®Ø·Ø£ ÙˆÙŠØ±Ø¬Ø¹)
           â”‚
           â””â”€ (Ø¥Ø°Ø§ ØªÙ… Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„ØªØµÙ†ÙŠÙ)
              setStep(2)

  Ø§Ù„Ø­Ø§Ù„Ø© Ø§Ù„Ø­Ø§Ù„ÙŠØ©:
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ mediaFileObjects: [File1]  â”‚ âœ…
  â”‚ step: 2                    â”‚ âœ…
  â”‚ category: 'jobs: driver'   â”‚ âœ…
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      Ø§Ù„Ù…Ø±Ø­Ù„Ø© Ø§Ù„Ø«Ø§Ù„Ø«Ø©: Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ù€ Payload (Step 2 - Ø§Ù„Ù†Ø´Ø±)       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

  Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ÙŠØ¶ØºØ· "Ù†Ø´Ø±" ÙÙŠ Ø§Ù„Ø®Ø·ÙˆØ© Ø§Ù„Ø«Ø§Ù†ÙŠØ©
           â†“
  handleFinalPost() ÙŠÙØ³ØªØ¯Ø¹Ù‰
           â”‚
           â”œâ”€ ğŸ” ØªØ­Ù‚Ù‚ Ù…Ù† mediaFileObjects
           â”‚  Array.isArray(mediaFileObjects) = true âœ…
           â”‚  mediaFileObjects.length = 1 âœ…
           â”‚
           â”œâ”€ Ø¥Ù†Ø´Ø§Ø¡ postPayload:
           â”‚
           â”‚  const postPayload = {
           â”‚    content: '',                    // ğŸ”´ ÙØ§Ø±Øº
           â”‚    type: 'job',
           â”‚    isFeatured: false,
           â”‚    promotionType: null,
           â”‚    displayPage: 'jobs',
           â”‚    category: 'driver',
           â”‚    specialTag: null,
           â”‚    media: [],                      // ğŸ”´ ÙØ§Ø±Øº Ø¯Ø§Ø¦Ù…Ø§Ù‹!
           â”‚    rawMedia: [File1],              // âœ… Ø§Ù„Ù…Ù„ÙØ§Øª Ø§Ù„Ø£ØµÙ„ÙŠØ©!
           â”‚    scope: 'global',
           â”‚    country: null,
           â”‚    city: null,
           â”‚    contactPhone: '0551234567',
           â”‚    contactEmail: 'user@example.com',
           â”‚    contactMethods: { whatsapp: true, call: true, email: false },
           â”‚    isShort: false,
           â”‚    title: 'ÙˆØ¸ÙŠÙØ© Ø³Ø§Ø¦Ù‚',
           â”‚    location: undefined
           â”‚  }
           â”‚
           â””â”€ onPostSubmit(postPayload)  âœ… ØªÙØ±Ø³Ù„ Ù„Ù„Ù€ App.tsx

  Ø§Ù„Ø­Ø§Ù„Ø© Ø§Ù„Ø­Ø§Ù„ÙŠØ©:
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ postPayload = {                  â”‚
  â”‚   content: '',                   â”‚
  â”‚   media: [],                     â”‚
  â”‚   rawMedia: [File1],             â”‚
  â”‚   ...                            â”‚
  â”‚ }                                â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    Ø§Ù„Ù…Ø±Ø­Ù„Ø© Ø§Ù„Ø±Ø§Ø¨Ø¹Ø©: Ù…Ø¹Ø§Ù„Ø¬Ø© ÙÙŠ App.tsx (handlePostSubmit)      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

  handlePostSubmit(postPayload) ÙŠÙØ³ØªØ¯Ø¹Ù‰ Ù…Ù† CreatePostModal
           â†“
  const promotionType = postPayload.promotionType  // null
  const payloadToSend = { ...postPayload }
  delete payloadToSend.promotionType
           â†“
  Ø¥Ù†Ø´Ø§Ø¡ tempPost Ù„Ù„Ø¹Ø±Ø¶ Ø§Ù„ÙÙˆØ±ÙŠ:
  
  tempPost = {
    id: 'temp-pending',
    user: { ... },
    content: '',
    image: postPayload.rawMedia[0] ? URL.createObjectURL(...) : undefined,
    media: [
      {
        url: 'blob:http://localhost:3000/xyz',
        type: 'video'
      }
    ]  âœ… ÙŠØ¹Ø±Ø¶ Ø§Ù„ÙÙŠØ¯ÙŠÙˆ ÙÙŠ Feed
  }
           â†“
  setPendingPost(tempPost)  âœ… Ø¹Ø±Ø¶ Ø§Ù„ÙÙŠØ¯ÙŠÙˆ ÙÙˆØ±Ø§Ù‹
  setPendingStatus('publishing')
  setPostErrorMsg('')
  setPostUploadProgress(0)
  setIsCreateModalOpen(false)
           â†“
  performBackgroundUpload() ÙŠÙØ³ØªØ¯Ø¹Ù‰ Ø¨Ø´ÙƒÙ„ ØºÙŠØ± Ù…ØªØ²Ø§Ù…Ù†
           â”‚
           â”œâ”€ Ø§Ù†ØªØ¸Ø± 1.5 Ø«Ø§Ù†ÙŠØ©
           â”‚
           â”œâ”€ Ø§Ø¨Ø¯Ø£ increment progress ÙƒÙ„ 100ms
           â”‚
           â””â”€ Ø§Ù„Ø¢Ù† Ø§Ù„Ø¬Ø²Ø¡ Ø§Ù„Ø­Ø±Ø¬...

  Ø§Ù„Ø­Ø§Ù„Ø© Ø§Ù„Ø­Ø§Ù„ÙŠØ©:
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ pendingPost: tempPost            â”‚ âœ…
  â”‚ pendingStatus: 'publishing'      â”‚
  â”‚ postUploadProgress: 0            â”‚
  â”‚ payloadToSend = {                â”‚
  â”‚   content: '',                   â”‚
  â”‚   media: [],                     â”‚ ğŸ”´ Ù„Ø§ ØªØ²Ø§Ù„ ÙØ§Ø±ØºØ©
  â”‚   rawMedia: [File1],             â”‚ âœ… Ø§Ù„Ù…Ù„ÙØ§Øª Ù…ÙˆØ¬ÙˆØ¯Ø©
  â”‚   ...                            â”‚
  â”‚ }                                â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    Ø§Ù„Ù…Ø±Ø­Ù„Ø© Ø§Ù„Ø®Ø§Ù…Ø³Ø©: Ø±ÙØ¹ Ø§Ù„Ù…Ù„ÙØ§Øª (Background Upload)           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

  ÙÙŠ performBackgroundUpload():
           â†“
  let finalPayload = { ...payloadToSend }
  
  Ø§Ù„Ø¢Ù† Ø§Ù„ÙØ­Øµ Ø§Ù„Ø­Ø±Ø¬:
           â†“
  ğŸ” if (postPayload.rawMedia?.length > 0) {
  â”‚
  â”‚  postPayload.rawMedia = [File1]
  â”‚  postPayload.rawMedia.length = 1
  â”‚  1 > 0 = true âœ… ÙŠØ¯Ø®Ù„ Ø§Ù„Ø´Ø±Ø·!
  â”‚
  â”‚  â†“
  â”‚  const uploaded = await uploadFiles(postPayload.rawMedia)
  â”‚
  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚  â”‚ ÙÙŠ uploadFiles([File1]):            â”‚
  â”‚  â”‚                                     â”‚
  â”‚  â”‚ formData.append('files', File1)    â”‚
  â”‚  â”‚                                     â”‚
  â”‚  â”‚ POST /api/v1/upload/multiple      â”‚
  â”‚  â”‚ {                                   â”‚
  â”‚  â”‚   file: <binary data - 5MB>        â”‚
  â”‚  â”‚ }                                   â”‚
  â”‚  â”‚                                     â”‚
  â”‚  â”‚ Response: {                         â”‚
  â”‚  â”‚   success: true,                    â”‚
  â”‚  â”‚   files: [                          â”‚
  â”‚  â”‚     {                               â”‚
  â”‚  â”‚       filePath: 'uploads/v...',    â”‚
  â”‚  â”‚       fileId: 'b2_abc123',         â”‚
  â”‚  â”‚       fileType: 'video',           â”‚
  â”‚  â”‚       size: 5242880                â”‚
  â”‚  â”‚     }                               â”‚
  â”‚  â”‚   ]                                 â”‚
  â”‚  â”‚ }  âœ… Ø§Ù„Ø®Ø§Ø¯Ù… ÙŠØ±Ø¯ Ø¨Ù†Ø¬Ø§Ø­            â”‚
  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
  â”‚
  â”‚  â†“
  â”‚  finalPayload.media = uploaded.map(f => ({
  â”‚    url: f.filePath,  // 'uploads/v...'
  â”‚    type: f.fileType  // 'video'
  â”‚  }))
  â”‚
  â”‚  finalPayload.media = [
  â”‚    {
  â”‚      url: 'uploads/video_xyz.mp4',
  â”‚      type: 'video'
  â”‚    }
  â”‚  ]  âœ… Ø§Ù„Ø¢Ù† Ù„Ù‡Ø§ Ù…Ø­ØªÙˆÙ‰!
  â”‚
  â”‚  â†“
  â”‚  delete finalPayload.rawMedia  âœ… Ø­Ø°Ù Ø§Ù„Ù…Ù„ÙØ§Øª Ø§Ù„Ø£ØµÙ„ÙŠØ©
  â”‚
  â””â”€ }
           â†“
  Ø§Ù„Ø¢Ù† finalPayload Ø¬Ø§Ù‡Ø²Ø©:
  
  finalPayload = {
    content: '',                              // ğŸ”´ ÙØ§Ø±ØºØ©
    type: 'job',
    media: [
      { url: 'uploads/video_xyz.mp4', type: 'video' }  // âœ… Ù…Ù…ØªÙ„Ø¦Ø©
    ],
    ...
    // rawMedia Ù…Ø­Ø°ÙˆÙØ© âœ…
  }

  Ø§Ù„Ø­Ø§Ù„Ø© Ø§Ù„Ø­Ø§Ù„ÙŠØ©:
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ finalPayload = {                 â”‚
  â”‚   content: '',                   â”‚
  â”‚   media: [                       â”‚
  â”‚     {                            â”‚
  â”‚       url: 'uploads/...',        â”‚ âœ…
  â”‚       type: 'video'              â”‚ âœ…
  â”‚     }                            â”‚
  â”‚   ]                              â”‚
  â”‚ }                                â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    Ø§Ù„Ù…Ø±Ø­Ù„Ø© Ø§Ù„Ø³Ø§Ø¯Ø³Ø©: Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø·Ù„Ø¨ Ù„Ù„Ø®Ø§Ø¯Ù… (Create Post)          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

  POST /api/v1/posts
  
  Headers:
    Content-Type: application/json
    Authorization: Bearer <token>
  
  Body (JSON):
  {
    "content": "",                                   // ğŸ”´ ÙØ§Ø±Øº!
    "type": "job",
    "media": [
      {
        "url": "uploads/video_xyz.mp4",
        "type": "video"
      }
    ],                                              // âœ… ÙŠØ­ØªÙˆÙŠ Ø¹Ù„Ù‰ Ø§Ù„ÙÙŠØ¯ÙŠÙˆ
    "isFeatured": false,
    "displayPage": "jobs",
    "category": "driver",
    "scope": "global",
    ...
  }
           â†“
  Ø§Ù„Ø®Ø§Ø¯Ù… (postController.js) ÙŠØ³ØªÙ‚Ø¨Ù„ Ø§Ù„Ø·Ù„Ø¨:
           â”‚
           â”œâ”€ ÙŠÙØ³ØªØ®Ø±Ø¬ media Ù…Ù† req.files (Ù…Ù† multer)
           â”‚  req.files = [] ğŸ”´ ÙØ§Ø±Øº Ù„Ø£Ù†Ù†Ø§ Ø£Ø±Ø³Ù„Ù†Ø§ JSON!
           â”‚
           â”œâ”€ ÙŠÙØ³ØªØ®Ø±Ø¬ media Ù…Ù† req.body
           â”‚  req.body.media = [
           â”‚    { url: 'uploads/...', type: 'video' }
           â”‚  ]  âœ… Ù…ÙˆØ¬ÙˆØ¯ Ù‡Ù†Ø§!
           â”‚
           â”œâ”€ Ø§Ù„Ø¯Ù…Ø¬:
           â”‚  media = [...req.files, ...req.body.media]
           â”‚  media = [{ url: 'uploads/...', type: 'video' }] âœ…
           â”‚
           â”œâ”€ Ø§Ù„ÙØ­Øµ:
           â”‚  if (!content || content.trim() === '') {
           â”‚    if (media.length === 0) {
           â”‚      âŒ error: "ÙŠØ±Ø¬Ù‰ Ø¥Ø¶Ø§ÙØ© Ù…Ø­ØªÙˆÙ‰ Ù†ØµÙŠ Ø£Ùˆ ØµÙˆØ±/ÙÙŠØ¯ÙŠÙˆ"
           â”‚    }
           â”‚  }
           â”‚
           â”‚  content = '' â†’ trim() â†’ '' â†’ true
           â”‚  media.length = 1 â†’ 1 > 0 â†’ false
           â”‚
           â”‚  Ø§Ù„Ø´Ø±Ø· Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ:
           â”‚  true && false = false â†’ âœ… Ù„Ø§ ÙŠØ±Ù…ÙŠ Ø®Ø·Ø£!
           â”‚
           â””â”€ âœ… ÙŠÙ†Ø´Ø¦ Ø§Ù„Ù…Ù†Ø´ÙˆØ± Ø¨Ù†Ø¬Ø§Ø­!
           
  Response:
  {
    success: true,
    post: {
      _id: '507f1f77bcf86cd799439011',
      user: '507f1f77bcf86cd799439010',
      content: '',
      media: [
        {
          url: 'uploads/video_xyz.mp4',
          type: 'video'
        }
      ],
      createdAt: '2024-01-30T10:30:00Z'
    }
  }  âœ…
           â†“
  ÙÙŠ App.tsx handlePostSubmit:
           â”‚
           â”œâ”€ setPostUploadProgress(100)
           â”œâ”€ setPendingStatus('success')
           â”œâ”€ postSuccessfully ØªÙ…!
           â”‚
           â””â”€ âœ… Ø§Ù„ÙÙŠØ¯ÙŠÙˆ ÙŠØ¸Ù‡Ø± ÙÙŠ Feed!

  Ø§Ù„Ø­Ø§Ù„Ø© Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠØ©:
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ âœ… Ø§Ù„Ù…Ù†Ø´ÙˆØ± ØªÙ… Ø¥Ù†Ø´Ø§Ø¤Ù‡      â”‚
  â”‚ âœ… Ø§Ù„ÙÙŠØ¯ÙŠÙˆ ÙŠØ¹Ø±Ø¶ ÙÙŠ Feed   â”‚
  â”‚ âœ… Ø¨Ø¯ÙˆÙ† Ù†Øµ âœ… Ø¨Ø¯ÙˆÙ† Ù…Ø´Ø§ÙƒÙ„  â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”´ Ø§Ù„Ø³ÙŠÙ†Ø§Ø±ÙŠÙˆ Ø§Ù„Ø®Ø§Ø·Ø¦ (Ø¹Ù†Ø¯Ù…Ø§ ÙŠØ­Ø¯Ø« Ø§Ù„Ø®Ø·Ø£)

```
Ù„Ùˆ ÙƒØ§Ù† Ø§Ù„Ø´Ø±Ø· ÙÙŠ App.tsx Ù‚Ø¯ FAILED:

  if (postPayload.rawMedia?.length > 0) {  // ğŸ”´ FALSE!
    // Ù„Ø§ ÙŠØ¯Ø®Ù„ Ù‡Ù†Ø§
  }
           â†“
  finalPayload = {
    content: '',
    media: [],              // ğŸ”´ Ù„Ø§ ØªØ²Ø§Ù„ ÙØ§Ø±ØºØ©!
    rawMedia: [File1]       // ğŸ”´ Ù„Ù… ØªÙØ­Ø°Ù!
  }
           â†“
  POST /api/v1/posts {
    content: '',
    media: []               // ğŸ”´ ÙØ§Ø±ØºØ©
    rawMedia: [File1]       // âš ï¸ File object ÙÙŠ JSON!
  }
           â†“
  Ø§Ù„Ø®Ø§Ø¯Ù…:
    content = '' â†’ true
    media.length = 0 â†’ true
    
    if (true && true) {
      âŒ return "ÙŠØ±Ø¬Ù‰ Ø¥Ø¶Ø§ÙØ© Ù…Ø­ØªÙˆÙ‰ Ù†ØµÙŠ Ø£Ùˆ ØµÙˆØ±/ÙÙŠØ¯ÙŠÙˆ"
    }
           â†“
  ğŸ”´ Ø§Ù„Ø®Ø·Ø£ Ø§Ù„Ø°ÙŠ Ø±Ø£ÙŠÙ‡ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…!
```

---

## ğŸ“Š Ø§Ù„Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ù…Ù‚Ø§Ø±Ù†

| Ø§Ù„Ù…Ø±Ø­Ù„Ø© | mediaFileObjects | rawMedia | media | finalPayload.media | Ø§Ù„Ù†ØªÙŠØ¬Ø© |
|--------|------------------|----------|-------|-------------------|--------|
| Ø§Ø®ØªÙŠØ§Ø± | âœ… [File1] | - | - | - | - |
| Step 2 | âœ… [File1] | âœ… [File1] | âŒ [] | - | - |
| Upload | âœ… [File1] | âœ… [File1] | âŒ [] | âœ… [URL+Type] | âœ… Ù†Ø¬Ø­ |
| **Ø®Ø·Ø£** | âœ… [File1] | âœ… [File1] | âŒ [] | âŒ [] | âŒ ÙØ´Ù„ |

---

## ğŸ¯ Ù†Ù‚Ø§Ø· Ø§Ù„ÙØ´Ù„ Ø§Ù„Ù…Ø­ØªÙ…Ù„Ø©

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Ù†Ù‚Ø·Ø© 1: mediaFileObjects ØªÙÙÙ‚Ø¯     â”‚
â”‚ Ø§Ù„Ø³Ø¨Ø¨: Ø­Ø¯ÙˆØ« re-render               â”‚
â”‚ Ø§Ù„Ø­Ù„: ØªØ­Ù‚Ù‚ Ù…Ù† Array.isArray()      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Ù†Ù‚Ø·Ø© 2: Ø§Ù„Ø´Ø±Ø· rawMedia?.length      â”‚
â”‚ Ø§Ù„Ø³Ø¨Ø¨: undefined?.length = undefinedâ”‚
â”‚ Ø§Ù„Ø­Ù„: Array.isArray() && length > 0 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Ù†Ù‚Ø·Ø© 3: uploadFiles ÙŠØ±Ù…ÙŠ Ø®Ø·Ø£       â”‚
â”‚ Ø§Ù„Ø³Ø¨Ø¨: Ù…Ø´ÙƒÙ„Ø© ÙÙŠ Ø§Ù„Ø§ØªØµØ§Ù„             â”‚
â”‚ Ø§Ù„Ø­Ù„: catch block Ù…Ø¹ error handling â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Ù†Ù‚Ø·Ø© 4: Response mapping Ø®Ø§Ø·Ø¦       â”‚
â”‚ Ø§Ù„Ø³Ø¨Ø¨: filePath/fileType ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯ â”‚
â”‚ Ø§Ù„Ø­Ù„: ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø¨Ù†ÙŠØ© Ø§Ù„ÙØ¹Ù„ÙŠØ©        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Ù†Ù‚Ø·Ø© 5: finalPayload.media ÙØ§Ø±ØºØ©   â”‚
â”‚ Ø§Ù„Ø³Ø¨Ø¨: Ù„Ù… ØªÙÙ…Ù„Ø£ Ø¨Ù†Ø¬Ø§Ø­               â”‚
â”‚ Ø§Ù„Ø­Ù„: ØªØ­Ù‚Ù‚ Ù‚Ø¨Ù„ Ø¥Ø±Ø³Ø§Ù„Ù‡Ø§             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

